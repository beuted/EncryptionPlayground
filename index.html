<html>
    <head>
        <script src="https://code.jquery.com/jquery-2.2.3.min.js" integrity="sha256-a23g1Nt4dtEYOj7bR+vTu7+T8VP13humZFBJNIYoEJo=" crossorigin="anonymous" type="text/javascript"></script>
        <script src="http://peterolson.github.com/BigInteger.js/BigInteger.min.js"></script>
        <script src="rsa.js" type="text/javascript"></script>
        <script type="text/javascript">
            var rsa_generate = function() {
                var _p = $('#p').val();
                var _q = $('#q').val();

                if (!!_p && !RSA.isPrime(_p)) {
                	_p = null;
                	console.log('p is not a prime number');
                	$('#p').css('border', '1px solid red');
                } else if (!!_p) {
                	$('#p').css('border', '1px solid green');
                }

                if (!!_q && !RSA.isPrime(_q)) {
                	_q = null;
                	console.log('q is not a prime number');
                	$('#q').css('border', '1px solid red')
                } else if (!!_q) {
                	$('#q').css('border', '1px solid green');
                }

                var res = RSA.generate(_p, _q);
                $('#n').text(res.n);
                $('#e').text(res.e);
                $('#d').text(res.d);
                $('#t').text(res.t);
                console.log(JSON.stringify(res));
            }

            $(document).ready(() => {
               rsa_generate();

               $('#gen_key').click(rsa_generate);
            });
        </script>
    </head>
    <body>
        <h1>RSA Demo</h1>

        <h2>Algorithm</h2>

        <script src="https://gist.github.com/beuted/96662ea6370750c902ee9a74ce81d7e3.js"></script>

        <h2>Inputs (default randomly generated)</h2>
        <div>Private <u>prime</u> number p: <input id="p" type="text"></input></div>
        <div>Private <u>prime</u> number q: <input id="q" type="text"></input></div>

        <h2>Results</h2>
        <div>Public key (n=q*p): <b id="n"></b></div>
        <div>Public exponent (e): <b id="e"></b></div>
        <div>Private key (d): <b id="d"></b></div>
        <br>
        <button id="gen_key">Generate Private Key</button>


    </body>
</html>