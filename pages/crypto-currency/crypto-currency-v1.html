<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
        
        <link href="./style/main.css" rel="stylesheet">

        <script src="./node_modules/requirejs/require.js" data-main="src/config"></script>
        <script>
            var everythingLoaded = setInterval(function() {
                if (window.AddUiInteractionsV1) {
                    clearInterval(everythingLoaded);
                    window.AddUiInteractionsV1()
                }
            }, 10);
        </script>
    </head>
    <body>
        <div class="container">

            <h1 class="h1">A simple Crypto-currency</h1>
            <article class="card">
                <div class="card-block">
                    <p>For these examples we are going to consider the following simple problem: Alice want to buy a potato from Bob
                    for 1 potato-Coin, <b>How can Alice transfert 1 potato-Coin to Bob?</b> both users will have a private and
                    a public key that will allow them to sign messages.</p>
                    
                    <p>The asymmetric encryption system we will use is RSA (we <a href="file:///E:/src/repos/EncryptionPlayground/pages/rsa.html">
                    implemented a simple one here</a>) but we will need a deeper implementation that supports encryption/decryption of large amount of
                    data and of strings as well as a signing implementation, so we will use <code>jsrsasign</code> for that.</p>

                    <a href="https://github.com/kjur/jsrsasign" class="card-link">Jsrsasign</a>
                    <a href="http://www.michaelnielsen.org/ddi/how-the-bitcoin-protocol-actually-works/" class="card-link">How The Bitcoin Protocol Actually Work</a>
                </div>
            </article>
            
            <h2 class="h2"><b>Step 1:</b> Signed letter of intent</h2>

            <article>
                <p>Let's take a potato-coin network with 3 people: Alice, Bob and Charlie. Now consider the potato-coin trade being just a
                message Alice is sending, <b>signed with her private key</b>.</p>
                <div class="card" id="transaction-block" style="display: none;">
                    <div class="card-block">
                        <ol style="margin: 0;">
                            <li><b>Transaction message:</b>
                                <code class="transaction"></code>
                            </li>

                            <li><b>Alice will then sign the message with her private key:</b>
                                <code class="signed-message"></code>
                            </li>

                            <li><b>Bob can then verify that the message is from Alice by checking the signature, he finds that it is:</b>
                                <code class="verify-message"></code>
                            </li>

                            <li><b>Bob will broadcast this message to all users proving that he now owns +1 coin and Alice -1</b>

                            <li><b>Bob can now give Alice the potato she bought him. He can prove that Alice sent him a coin since he have a message signed with her private key</b>
                        </ol>
                    </div>
                </article>

                <p><button class="btn btn-primary btn-sm" onclick="window.aliceSend1CoinToBob()">Make Alice send one coin to Bob üòá</button></p>  
                              
                <p>As the transaction have been signed with Alice private key, we can know for sure that Alice is ok with the transaction. So if this encrypted transaction
                is broadcasted on the network, everybody will be aware that Bob now have +1 coin and Alice -1 coin.</p>
            </article>
            
            <div class="alert alert-danger" role="alert">This implementation can be abused in an easy way!</div>
            <h3 class="h3">Simple double emission</h3>
            <article>
                <p>Bob could replay the same transaction on the network and steal all Alice money!</p>
                <ol>
                    <li><b>Previous signed transaction message:</b>
                        <code class="signed-message"></code>
                    </li>

                    <li><b>Bob can replay the message 10 times and steal 10 coins from Alice, Charlie and others will have no way to know!
                    <button class="btn btn-primary btn-sm" onclick="window.broadcastMessage10Times()">Broadcast the same transaction message 10 times üòà</button></b>
                </ol>

                <p>We'll need a way to avoid simple double spending</p>
                <div class="row navigation">
                    <div class="col-sm-12">
                        <a class="btn btn-success float-right" href="./crypto-currency-v2.html">next >></a>
                    </div>
                </div>
            </article>
        </div>

        <div class="close-network">‚ùå</div>
        <div class="network">
            <div id="Alice"></div>
            <div id="Bob"></div>
            <div id="Charlie"></div>
        </div>
    </body>
</html>
